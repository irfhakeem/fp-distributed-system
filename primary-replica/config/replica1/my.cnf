[mysqld]
server-id = 2

# Relay log config
relay-log = relay-log-replica1
relay-log-index = relay-log-replica1.index
log-slave-updates = ON

# GTID config
gtid-mode = ON
enforce-gtid-consistency = ON

# Read-only will be set after replication is configured
# read-only = ON
# super-read-only = ON

# Binary logging config
log-bin = mysql-bin
binlog-format = ROW
sync_binlog = 1

# Char set
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci

# Performance tuning
max_connections = 200
innodb_buffer_pool_size = 256M
innodb_log_file_size = 64M

# Replication performance
slave_parallel_workers = 4
slave_parallel_type = LOGICAL_CLOCK
slave_preserve_commit_order = ON

# Replication crash safety
relay_log_recovery = ON
relay_log_info_repository = TABLE
master_info_repository = TABLE

[client]
default-character-set = utf8mb4
